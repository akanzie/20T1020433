@model _20T1020433.Web.Models.CustomerSearchOutput
@{
    Layout = null;
}
<p>Có <strong>@string.Format("{0:N0}", Model.RowCount)</strong> khách hàng trong tổng số <strong>@string.Format("{0:N0}", @Model.PageCount) </strong>trang</p>

<table class="table table-bordered table-hover">
    <thead>
        <tr class="bg bg-primary">
            <th>Tên khách hàng</th>
            <th>Tên giao dịch</th>
            <th>Quốc gia</th>
            <th>Thành phố</th>
            <th>Địa chỉ</th>
            <th>Mã bưu chính</th>
            <th>Email</th>

            <th>

            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Data)
        {
            <tr>
                <td>@item.CustomerName</td>
                <td>@item.ContactName</td>
                <td>@item.Country</td>
                <td>@item.City</td>
                <td>@item.Address</td>
                <td>@item.PostalCode</td>
                <td>@item.Email</td>
                <td>
                    <a href="~/Customer/Edit/@item.CustomerID" class="btn btn-success">Sửa</a>
                    <a href="~/Customer/Delete/@item.CustomerID" class="btn btn-danger">Xóa</a>
                </td>
            </tr>
        }
    </tbody>
</table>
<div class="text-center">
    <ul class="pagination">
        @for (int i = 1; i <= Model.PageCount; i++)
        {
            if (i == Model.Page)
            {
                <li class="paginate_button active">
                    <a href="#">@i</a>
                </li>
            }
            else
            {
                <li class="paginate_button">
                    <a href="javascript:;" onclick="doSearch(@i)">@i</a>
                </li>
            }

        }
    </ul>
</div>
@section scripts
{
    <script>
        $(document).ready(function () {
            $("#formSearch").submit(function (e) {
                e.preventDefault();
                doSearch(1);
                return;
            });
            doSearch(@Model.Page);
        })
        function doSearch(page) {
            var url = $("#formSearch").prop("action");
            var postData = $("#formSearch").serializeArray();
            postData.push({ "name": "page", "value": page });

            $.ajax({
                url: url,
                type: "POST",
                data: postData,
                error: function () {
                    alert("Your request is not valid!");
                },
                success: function (data) {
                    $("#searchResult").html(data);
                }
            });

            return;
        }
    </script>
}
